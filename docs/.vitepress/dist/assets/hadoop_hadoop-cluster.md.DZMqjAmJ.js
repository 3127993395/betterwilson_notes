import{_ as s,c as a,o as i,a1 as n}from"./chunks/framework.DCKU21so.js";const t="/assets/image-20240410183006918.DXlBXp4o.png",p="/assets/image-20240410220009746.DKRYDOrB.png",h="/assets/image-20240410220423842.Dodoj8D0.png",b=JSON.parse('{"title":"Hadoop集群","description":"","frontmatter":{},"headers":[],"relativePath":"hadoop/hadoop-cluster.md","filePath":"hadoop/hadoop-cluster.md"}'),l={name:"hadoop/hadoop-cluster.md"},e=n(`<h1 id="hadoop集群" tabindex="-1">Hadoop集群 <a class="header-anchor" href="#hadoop集群" aria-label="Permalink to &quot;Hadoop集群&quot;">​</a></h1><p>前置：所有主从节点的java版本，安装路径均一样</p><p>项目安排</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>master   192.168.43.136</span></span>
<span class="line"><span></span></span>
<span class="line"><span>slave1   192.168.43.137</span></span>
<span class="line"><span></span></span>
<span class="line"><span>slave2   192.168.43.138</span></span></code></pre></div><h2 id="设置host映射文件" tabindex="-1">设置Host映射文件 <a class="header-anchor" href="#设置host映射文件" aria-label="Permalink to &quot;设置Host映射文件&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># cmaster</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 注意：ip和名称之间是tab建，不是空隔</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/hosts</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.43.136</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">	master</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.43.137</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">	slave1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.43.138</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">	slave2</span></span></code></pre></div><p><img src="`+t+`" alt="image-20240410183006918"></p><p><strong>使用<code>ping</code>命令验证是否配置成功</strong></p><h2 id="设置集群节点免密登录" tabindex="-1">设置集群节点免密登录 <a class="header-anchor" href="#设置集群节点免密登录" aria-label="Permalink to &quot;设置集群节点免密登录&quot;">​</a></h2><p>在master上执行“ssh-keygen”命令生成公私钥。</p><p>第一个提示是询问将公私钥文件存放在哪，直接回车，选择默认位置。 第二个提示是请求用户输入密钥，既然操作的目的就是实现SSH无密钥登录，故此处必须使用空密钥，所谓的空密钥指的是直接回车，不是空格，更不是其他字符。此处请读者务必直接回车，使用空密钥。 第三个提示是要求用户确认刚才输入的密钥，既然刚才是空密钥（直接回车即空），那现在也应为空，直接回车即可。</p><p>最后，可通过命令“ls -all /root/.ssh”查看到，SSH密钥文件夹.ssh目录下的确生成了两个文件id_rsa和id_rsa_pub，这两个文件都有用，其中公钥用于加密，私钥用于解密。中间的rsa表示算法为RSA算法。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh-keygen</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ls</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -all</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /root/.ssh</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh-copy-id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">	master</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh-copy-id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> slave1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh-copy-id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> slave2</span></span></code></pre></div><p><strong>检查能否免密登录</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ssh  master    //用户登录本机网络地址</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ssh  slave1    //用户从master远程登录slave1</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ssh  slave2    //用户从master远程登录slave2</span></span></code></pre></div><p>注意：我们搭建的是3节点完全分布式的Hadoop集群，所以3个节点的 /etc/hosts 文件要保持一致。用 scp 命令分发文件到每个节点覆盖原有配置。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/hosts</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> slave1:/etc/hosts</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/hosts</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> slave2:/etc/hosts</span></span></code></pre></div><h2 id="设置操作系统环境" tabindex="-1">设置操作系统环境 <a class="header-anchor" href="#设置操作系统环境" aria-label="Permalink to &quot;设置操作系统环境&quot;">​</a></h2><h3 id="配置hdfs" tabindex="-1">配置HDFS <a class="header-anchor" href="#配置hdfs" aria-label="Permalink to &quot;配置HDFS&quot;">​</a></h3><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">vim core-site.xml</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">configuration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;hadoop.tmp.dir&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;/root/hadoop-3.3.5/etc/hadoop/cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;fs.defaultFS&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;hdfs://master:8020&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">configuration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p><strong>注意</strong> hadoop2配置从节点是在<code>slaves</code>文件中，而hadoop3配置从节点是在<code>workers</code>文件中</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> workers</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 将localhost改为如下配置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">slave1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">slave2</span></span></code></pre></div><h3 id="拷贝集群配置至其它服务器" tabindex="-1">拷贝集群配置至其它服务器 <a class="header-anchor" href="#拷贝集群配置至其它服务器" aria-label="Permalink to &quot;拷贝集群配置至其它服务器&quot;">​</a></h3><p>在master机上执行下列命令，将配置好的hadoop从master节点拷贝至slave节点。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /root</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hadoop-3.3.5/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> slave1:/root/hadoop-3.3.5</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hadoop-3.3.5/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> slave2:/root/hadoop-3.3.5</span></span></code></pre></div><p>在master服务器上格式化主节点：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/root/hadoop-3.3.5/bin/hdfs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> namenode</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -format</span></span></code></pre></div><p>启动Hadoop</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/root/hadoop-3.3.5/sbin/start-dfs.sh</span></span></code></pre></div><h2 id="通过查看进程的方式验证" tabindex="-1">通过查看进程的方式验证 <a class="header-anchor" href="#通过查看进程的方式验证" aria-label="Permalink to &quot;通过查看进程的方式验证&quot;">​</a></h2><p><img src="`+p+'" alt="image-20240410220009746"></p><h2 id="统一启动yarn" tabindex="-1">统一启动YARN <a class="header-anchor" href="#统一启动yarn" aria-label="Permalink to &quot;统一启动YARN&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/root/hadoop-3.3.5/sbin/start-yarn.sh</span></span></code></pre></div><p><img src="'+h+'" alt="image-20240410220423842"></p>',34),k=[e];function d(o,r,c,g,E,y){return i(),a("div",null,k)}const u=s(l,[["render",d]]);export{b as __pageData,u as default};
